---
import { Button } from "@/components/ui/button";
import { Image } from "astro:assets";
import tableDesk from "../assets/tabledesk.png";
import tableMob from "../assets/tablemobile.png";
import type { ComponentProps } from "../../../../globals/types/component-props";
import type { TranslationsType } from "../../../../globals/types/translations";
import { Features } from "../../../../globals/types/enums";
import { showcase } from "../../../../globals/features/showcase/text";

interface Props {
  componentProps: ComponentProps;
}
const { componentProps } = Astro.props;

const title: TranslationsType = {
  en: "",
  it: "",
  tr: "",
  ro: "",
  ar: "",
  de: "",
  es: "",
  sv: `Hur snabbt kan Amazon växa?`,
  pt: "",
  fi: "",
  pl: ``,
  hu: "",
  th: "",
  ms: "",
  vi: "",
};

const para: TranslationsType = {
  en: "",
  it: "",
  tr: "",
  ro: "",
  ar: "",
  de: "",
  es: "",
  sv: `Amazons totala försäljningstillväxt föregående år.`,
  pt: "",
  fi: "",
  pl: ``,
  hu: "",
  th: "",
  ms: "",
  vi: "",
};

const formBtn: TranslationsType = {
  en: "",
  it: "",
  tr: "",
  ro: "",
  ar: "",
  de: "",
  es: "",
  sv: `Börja nu`,
  pt: "",
  fi: "",
  pl: ``,
  hu: "",
  th: "",
  ms: "",
  vi: "",
};
---

<section id="section4" class="relative py-10">
  <div
    class="relative z-10 container flex flex-col items-center justify-center gap-4 text-center"
  >
    <h2
      set:html={componentProps.features?.includes(Features.showcase)
        ? showcase({
            words: 5,
          })
        : title[componentProps.lang]}
      class="text-heading2 font-bold"
    />
    <p
      class="text-center text-sm sm:text-lg"
      set:html={componentProps.features?.includes(Features.showcase)
        ? showcase({
            words: 10,
          })
        : para[componentProps.lang]}
    />
    <!-- TODO: do a real chart here -->
    <Image
      src={tableMob}
      alt="Background"
      class="block w-full max-w-96 md:hidden"
      widths={[320, tableMob.width]}
      sizes={`384px`}
    />
    <Image
      src={tableDesk}
      alt="Background"
      class="hidden w-full max-w-[930px] md:block"
      widths={[768, tableDesk.width]}
      sizes={`
        (max-width: 767px) 100px,
        930px
      `}
    />
    <Button
      variant="secondary"
      set:html={componentProps.features?.includes(Features.showcase)
        ? showcase({
            words: 2,
          })
        : formBtn[componentProps.lang]}
      className="hover:bg-primary hover:text-primary-foreground h-auto w-auto px-8 py-3 font-bold"
      id="s4-btn"
    />
  </div>
</section>

<style lang="scss"></style>

<script lang="ts">
  const form = document.querySelector("form");
  const button = document.getElementById("s4-btn");

  button.addEventListener("click", () => {
    form.scrollIntoView({
      behavior: "smooth",
    });
  });
</script>
