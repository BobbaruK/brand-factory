---
import { bullet1, bullet2, bullet3 } from "@/constants/bullets";
import { buttonDisclaimer } from "@/constants/button-disclimer";
import { cn } from "@/lib/utils";
import { Image } from "astro:assets";
import { ButtonDisclaimer } from "../../../../globals/components/button-disclaimer";
import SVGMask from "../../../../globals/components/svg-mask";
import { showcase } from "../../../../globals/features/showcase/text";
import type { ComponentProps } from "../../../../globals/types/component-props";
import { Features } from "../../../../globals/types/enums";
import type { TranslationsType } from "../../../../globals/types/translations";
import bg from "../assets/bullets-desktop.jpg";
import { Button } from "./ui/button";

interface Props {
  componentProps: ComponentProps;
}
const { componentProps } = Astro.props;

const buttonLabel: TranslationsType = {
  en: `Start trading shares`,
  it: ``,
  tr: ``,
  ro: ``,
  ar: ``,
  de: ``,
  es: ``,
  sv: ``,
  pt: ``,
  fi: ``,
  pl: ``,
  hu: ``,
  th: ``,
  ms: ``,
  vi: ``,
};

const bullets: {
  icon: string;
  para: TranslationsType;
}[] = [
  {
    icon: bullet1,
    para: {
      en: `<strong class="font-black">TRUST</strong> - ${componentProps.brandObj.name} is overseen by various regulators in the European Union.`,
      it: ``,
      tr: ``,
      ro: ``,
      ar: ``,
      de: ``,
      es: ``,
      sv: ``,
      pt: ``,
      fi: ``,
      pl: ``,
      hu: ``,
      th: ``,
      ms: ``,
      vi: ``,
    },
  },
  {
    icon: bullet2,
    para: {
      en: `<strong class="font-black">PROTECTED DATA</strong> - We protect your data with the most advanced security methods available.`,
      it: ``,
      tr: ``,
      ro: ``,
      ar: ``,
      de: ``,
      es: ``,
      sv: ``,
      pt: ``,
      fi: ``,
      pl: ``,
      hu: ``,
      th: ``,
      ms: ``,
      vi: ``,
    },
  },
  {
    icon: bullet3,
    para: {
      en: `<strong class="font-black">SUPPORT</strong> - Enjoy customized, multilingual support from our dedicated customer service team.`,
      it: ``,
      tr: ``,
      ro: ``,
      ar: ``,
      de: ``,
      es: ``,
      sv: ``,
      pt: ``,
      fi: ``,
      pl: ``,
      hu: ``,
      th: ``,
      ms: ``,
      vi: ``,
    },
  },
];
---

<section class="relative py-4 sm:py-7 md:py-9 lg:py-10 xl:py-12">
  <Image
    src={bg}
    alt="Background"
    class="absolute inset-0 z-0 h-full w-full object-cover object-left md:object-center"
    widths={[320, 576, 640, 768, 1024, 1280, 1536, bg.width]}
    sizes={`
      (max-width: 320px) 576px,
      (max-width: 576px) 640px,
      (max-width: 640px) 768px,
      (max-width: 768px) 1024px,
      (max-width: 1024px) 1280px,
      (max-width: 1280px) 1536px,
      100vw
    `}
  />
  <div class="relative z-10 flex flex-col gap-9">
    <div class="text-white">
      <div class="container grid place-items-center">
        <ButtonDisclaimer
          componentProps={componentProps}
          disclaimer={{
            active: true,
            text: buttonDisclaimer[componentProps.lang],
          }}
        >
          <Button
            variant="secondary"
            className={cn(
              "js-modal-trigger h-auto w-full max-w-full cursor-pointer px-8 py-2 text-lg font-bold whitespace-normal md:text-2xl",
            )}
            set:html={componentProps.features?.includes(Features.showcase)
              ? showcase({
                  words: 2,
                })
              : buttonLabel[componentProps.lang]}
          />
        </ButtonDisclaimer>
      </div>
    </div>
    <div class="bg-secondary/80">
      <div
        class="container flex flex-wrap items-start justify-around gap-4 py-9"
      >
        {
          bullets.map((bullet) => (
            <div class="flex max-w-[35ch] flex-col items-center justify-start gap-4 text-center">
              <div class="text-background text-[110px]">
                <SVGMask url={bullet.icon} />
              </div>
              <p
                set:html={
                  componentProps.features?.includes(Features.showcase)
                    ? showcase({
                        words: 15,
                      })
                    : bullet.para[componentProps.lang]
                }
              />
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
